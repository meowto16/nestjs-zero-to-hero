# Введение в JSON веб токены (JWT)

## Что такое JWT?

- Open-source стандарт (RFC-7519)
- Используется для авторизации или безопасного обмена информацией между сторонами
- Верификация, что отправитель является тем, за кого он себя выдает
- Подписывается эмитентом, с помощью секретного ключа или парного ключа (HMAC алгоритм, RSA или ECDSA)

## JWT Structure

#### Пример токена

![1. Token Example](./img/1.%20Token%20Example.png)

- Header (красный) - содержит метаданные о токене (тип, алгоритм хэширования и т.д)
- Payload (фиолетовый) - содержит утверждения о сущности (например, юзер) и дополнительные данные
- Signature - результат

## Практический пример

Пользователь "John Doe" логинится в наше приложение. Мы ходим создать для Джона токен,
с помощью которого он сможет авторизоваться на некоторое время.

Мы создаем payload содержащий username и role. Затем мы подписываем токен временем истечения.
Используем секретный ключ для подписи.

## Авторизация настоящего Джона

Джон посылает запрос к нашему API. Он хочет удалить задачу. В headers запроса мы можем увидеть
JWT Token.

Для валидации токена - мы берем headers и payload из него, и регенерируем signature используя наш секретный ключ.

Затем мы сравниваем результат нашей signature с его signature в токене.

## Отклонение ненастоящего Джона

Джон посылает запрос к нашему API, и он хочет получить доступ к некоторой информации,
которую должны видеть только админы. В реальности, он обычный пользователь без прав администратора.
Но он хитрый. Он решил взять токен и модифицировать payload.

Но у него ничего не получится. Мы возьмем header и payload из его фейкового токена, и сгенерируем сигнатуру, используя
наш секретный ключ.

Мы сравним результат нашей signature с его — нет вариантов, что он сможет также подделать signature.

## Чуть больше информации о JWT

JWT могут быть декодированы кем-либо. Они не должны содержать конфиденциальной информации вроде паролей.

Они полезны для фронт-енд приложений, которые используют токен чтобы переключать фичи условно. Например, если пользователь
администратор - мы можем скрыть или наоборот показать кнопку в зависимости от claims в его токене.

И наконец - в идеале JWT должно жить недолго.

### [Статья на хабре о JWT](https://habr.com/ru/post/340146/)
